<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProposalKit — Professional Proposals in Minutes</title>
    <meta name="description" content="Create professional proposals with 13 PDF templates. Track payments, manage clients, and close deals faster. Free forever.">
    <meta property="og:title" content="ProposalKit — Professional Proposals">
    <meta property="og:description" content="Create stunning proposals, invoices, and contracts. 13 PDF templates. Payment tracking. Client management.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://proposalkit.vercel.app/">
    <meta property="og:image" content="https://proposalkit.vercel.app/assets/icons/og-image.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ProposalKit — Professional Proposals">
    <meta name="twitter:description" content="Create professional proposals with 13 PDF templates. Free forever.">
    <meta name="twitter:image" content="https://proposalkit.vercel.app/assets/icons/og-image.png">
    <meta name="theme-color" content="#ffffff">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdn.tailwindcss.com https://api.anthropic.com https://plausible.io https://accounts.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://accounts.google.com; font-src https://fonts.gstatic.com; img-src 'self' data: blob: https://*.googleusercontent.com; connect-src 'self' https://*.supabase.co https://api.anthropic.com https://plausible.io https://accounts.google.com https://*.googleapis.com https://cdn.jsdelivr.net https://cdn.tailwindcss.com https://assets-v2.lottiefiles.com https://lottie.host; frame-src https://accounts.google.com https://*.supabase.co; frame-ancestors 'self';">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.svg">
    <!-- Analytics (Plausible — no cookies, GDPR compliant) -->
    <script defer data-domain="proposalkit.vercel.app" src="https://plausible.io/js/script.js"></script>
    <!-- JetBrains Mono for code (SF Pro / Helvetica Neue are system fonts) -->
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <!-- Lottie Player (for empty state animation) -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/@lottiefiles/dotlottie-wc@0.8.16/+esm"></script>
    <!-- Lucide Icons (vendored locally) -->
    <script src="assets/js/vendor/lucide-0.460.0.js"></script>
    <!-- Tailwind CSS v4 Browser CDN (pinned, SRI not practical for dynamic compilation) -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4.0.0"></script>
    <!-- Supabase JS Client (vendored locally) -->
    <script src="assets/js/vendor/supabase-2.49.1.js"></script>
    <!-- Light mode only — no theme detection needed -->
    <!-- App CSS (modular) -->
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/pages.css">
    <link rel="stylesheet" href="assets/css/features.css">
    <link rel="stylesheet" href="assets/css/pdf.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="assets/css/print.css">

</head>

<body>

    <!-- ═══ AUTH + ONBOARDING ═══ -->
    <div class="onboard" id="onboard">
        <!-- Auth: shadcn two-column split -->
        <div class="auth-split" id="authSplit" style="display:none">
            <div class="auth-left">
                <div class="auth-left-top">
                    <div class="auth-brand-icon">P</div>
                    <span class="auth-brand-name">ProposalKit</span>
                </div>
                <div class="auth-left-bottom">
                    <blockquote class="auth-quote">&ldquo;ProposalKit has completely transformed how I send proposals. What used to take hours now takes minutes.&rdquo;</blockquote>
                    <div class="auth-quote-author">Sofia Davis</div>
                </div>
            </div>
            <div class="auth-right">
                <div class="auth-right-top" id="authRightTop"></div>
                <div id="authContent"></div>
            </div>
        </div>
        <!-- Onboarding: card style -->
        <div class="ob-card ob-card-wide" id="obCard">
            <div class="ob-icon">P</div>
            <div id="obContent"></div>
        </div>
    </div>

    <!-- ═══ APP ═══ -->
    <a href="#bodyScroll" class="skip-link">Skip to main content</a>
    <div class="app" id="appShell" style="display:none">
        <!-- Mobile sidebar overlay -->
        <div class="side-overlay" id="sideOverlay" onclick="closeMobileSidebar()"></div>

        <!-- Sidebar — shadcn/ui sidebar-07 -->
        <aside class="side" id="sidebar" role="navigation" aria-label="Main navigation">
            <div class="side-rail" onclick="toggleSidebar()"></div>
            <!-- SidebarHeader -->
            <div class="side-header">
                <button class="side-team-btn" onclick="toggleSidebar()">
                    <div class="side-team-logo" id="sideLogo">P</div>
                    <span class="side-team-name" id="sideBrand">ProposalKit</span>
                </button>
            </div>
            <!-- SidebarContent -->
            <div class="side-body">
                <!-- NavMain group -->
                <div class="side-group">
                    <div class="side-new-wrap">
                        <button class="side-new-full" onclick="openNewModal()" data-tooltip="New Proposal (⌘N)" data-side="bottom">
                            <i data-lucide="circle-plus"></i><span>Quick Create</span>
                        </button>
                        <button class="side-new-icon" onclick="openCommandPalette()" data-tooltip="Search (⌘K)" data-side="bottom">
                            <i data-lucide="search"></i>
                        </button>
                    </div>
                    <div class="side-nav">
                        <button class="side-btn on" data-nav="dashboard" onclick="goNav('dashboard')"><i data-lucide="layout-dashboard"></i><span>Dashboard</span></button>
                        <button class="side-btn" data-nav="editor" onclick="goNav('editor')"><i data-lucide="file-text"></i><span>Proposals</span><span class="cnt" id="propCnt">0</span></button>
                        <button class="side-btn" data-nav="clients" onclick="goNav('clients')"><i data-lucide="users"></i><span>Customers</span><span class="cnt" id="clientCnt">0</span></button>
                    </div>
                </div>
                <!-- NavDocuments group -->
                <div class="side-group">
                    <div class="side-group-label">Recent</div>
                    <div id="recentList"></div>
                </div>
                <!-- NavSecondary group (mt-auto) -->
                <div class="side-group side-group-secondary">
                    <button class="side-btn" onclick="openGuide()"><i data-lucide="book-open"></i><span>How to use</span></button>
                    <button class="side-btn" onclick="openFeedbackModal()"><i data-lucide="message-square-warning"></i><span>Send feedback</span></button>
                    <button class="side-btn" data-nav="settings" onclick="goNav('settings')"><i data-lucide="settings"></i><span>Settings</span></button>
                </div>
            </div>
            <!-- SidebarFooter -->
            <div class="side-foot">
                <button class="side-user-btn" id="sideUserBtn">
                    <div class="side-user-avatar" id="sideUserAvatar" onclick="goNav('profile')">U</div>
                    <div class="side-user-info" onclick="goNav('profile')">
                        <span class="side-user-name" id="sideUserName">User</span>
                        <span class="side-user-email" id="sideUserEmail">Settings</span>
                    </div>
                    <i data-lucide="ellipsis-vertical" class="side-user-chevron" onclick="event.stopPropagation();toggleUserMenu()"></i>
                </button>
            </div>
        </aside>

        <!-- Main -->
        <div class="main">
            <div class="topbar">
                <button class="topbar-trigger" id="sidebarTrigger" onclick="toggleSidebar()" aria-label="Toggle sidebar">
                    <i data-lucide="panel-left"></i>
                </button>
                <div class="topbar-sep" aria-hidden="true"></div>
                <div class="topbar-breadcrumb">
                    <span class="breadcrumb-item breadcrumb-root" id="breadcrumbRoot" onclick="goNav('dashboard')">ProposalKit</span>
                    <i data-lucide="chevron-right" class="breadcrumb-sep"></i>
                    <span class="breadcrumb-item breadcrumb-current" id="topTitle">Dashboard</span>
                </div>
                <span class="sync-indicator" id="syncIndicator" style="display:none"></span>
                <span class="save-indicator" id="saveIndicator" style="display:none" aria-live="polite" role="status">
                    <i data-lucide="loader-2" class="save-icon saving"></i>
                    <i data-lucide="check" class="save-icon saved"></i>
                    <span class="save-text">Saved</span>
                </span>
                <div class="topbar-search" id="topSearch">
                    <i data-lucide="search"></i>
                    <input type="text" placeholder="Search proposals..." id="searchInput" oninput="filterList()"
                        aria-label="Search proposals">
                    <kbd class="kbd" style="cursor:pointer" onclick="openCommandPalette()"
                        title="Open command palette">⌘K</kbd>
                </div>
                <div class="topbar-right" id="topRight"></div>
            </div>
            <main class="body-scroll" id="bodyScroll" role="main"></main>
        </div>
    </div>

    <!-- Preview -->
    <div class="overlay" id="ov" onclick="closePreview()"></div>
    <div class="preview" id="prevPanel">
        <div class="prev-top">
            <i data-lucide="eye" class="prev-top-icon"></i>
            <span class="prev-top-t">Preview</span>
            <div class="tpl-picker" id="tplPicker">
                <button class="tpl-pick on" onclick="setDocTpl('modern',this)">Modern</button>
                <button class="tpl-pick" onclick="setDocTpl('clean',this)">Clean</button>
                <button class="tpl-pick" onclick="setDocTpl('minimal',this)">Minimal</button>
                <button class="tpl-pick" onclick="setDocTpl('executive',this)">Executive</button>
                <button class="tpl-pick" onclick="setDocTpl('stripe',this)">Stripe</button>
                <button class="tpl-pick" onclick="setDocTpl('nord',this)">Nord</button>
                <button class="tpl-pick" onclick="setDocTpl('bold',this)">Bold</button>
                <button class="tpl-pick" onclick="setDocTpl('compact',this)">Compact</button>
                <button class="tpl-pick" onclick="setDocTpl('sidebar',this)">Sidebar</button>
                <button class="tpl-pick" onclick="setDocTpl('formal',this)">Formal</button>
                <button class="tpl-pick" onclick="setDocTpl('american',this)">American</button>
                <button class="tpl-pick" onclick="setDocTpl('classic',this)">Classic</button>
                <button class="tpl-pick" onclick="setDocTpl('tabular',this)">Tabular</button>
            </div>
            <div class="prev-top-actions">
                <button class="btn-sm-outline" onclick="typeof showExportMenu==='function'&&showExportMenu(this)"><i data-lucide="file-down"></i> Export As</button>
                <button class="btn-sm-outline" onclick="doExport('invoice')"><i data-lucide="receipt"></i> As
                    Invoice</button>
                <button class="btn-sm-outline" onclick="typeof openDerivativesMenu==='function'&&openDerivativesMenu(this)"><i data-lucide="file-plus-2"></i> Generate</button>
                <button class="btn-sm" onclick="doExport('proposal')"><i data-lucide="download"></i> Export
                    PDF</button>
                <button class="btn-icon-outline" onclick="closePreview()" data-tooltip="Close (Esc)" data-side="bottom"
                    data-align="center"><i data-lucide="x"></i></button>
            </div>
        </div>
        <div class="prev-body">
            <div class="prev-doc" id="prevDoc"></div>
        </div>
    </div>

    <!-- New Proposal Modal (content built dynamically by openNewModal) -->
    <div class="modal-wrap" id="newModal" onclick="closeNewModal(event)" role="dialog" aria-modal="true" aria-label="New Proposal">
        <div class="modal modal-lg" id="newModalInner" onclick="event.stopPropagation()"></div>
    </div>

    <!-- Context Menu -->
    <div class="ctx" id="ctxMenu" role="menu" aria-label="Proposal actions">
        <div class="ctx-item" role="menuitem" onclick="ctxAction('open')"><i data-lucide="external-link"></i> Open</div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('dup')"><i data-lucide="copy"></i> Duplicate</div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('dupClient')"><i data-lucide="users"></i> Duplicate for Client</div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('export')"><i data-lucide="download"></i> Export PDF</div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('invoice')"><i data-lucide="receipt"></i> Export as Invoice</div>
        <div class="ctx-sep" role="separator"></div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('sow')"><i data-lucide="file-check"></i> Generate SOW</div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('contract')"><i data-lucide="file-pen"></i> Generate Contract</div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('receipt')"><i data-lucide="receipt"></i> Generate Receipt</div>
        <div class="ctx-sep" role="separator"></div>
        <div class="ctx-item" role="menuitem" onclick="ctxAction('status')"><i data-lucide="circle-dot"></i> Change Status</div>
        <div class="ctx-sep" role="separator"></div>
        <div class="ctx-item" role="menuitem" id="ctxArchive" onclick="ctxAction('archive')"><i data-lucide="archive"></i> Archive</div>
        <div class="ctx-item" role="menuitem" id="ctxUnarchive" onclick="ctxAction('unarchive')" style="display:none"><i
                data-lucide="archive-restore"></i> Unarchive</div>
        <div class="ctx-item danger" role="menuitem" onclick="ctxAction('del')"><i data-lucide="trash-2"></i> Delete</div>
    </div>

    <!-- Toast -->
    <div class="toasts" id="toastBox" aria-live="assertive" role="alert"></div>

    <!-- Global Loading Indicator -->
    <div class="loading-overlay" id="loadingOverlay" style="display:none">
        <div class="loading-spinner">
            <i data-lucide="loader-2"></i>
            <span id="loadingText">Loading...</span>
        </div>
    </div>

    <!-- QR Code generator (UPI payments, vendored locally) -->
    <script src="assets/js/vendor/qrcode-1.4.4.min.js"></script>

    <!-- Core: Supabase + Auth + Sync (before store) -->
    <script src="assets/js/core/supabase.js"></script>
    <script src="assets/js/core/auth.js"></script>
    <script src="assets/js/core/sync.js"></script>
    <!-- Core: Foundation -->
    <script src="assets/js/core/store.js"></script>
    <script src="assets/js/core/utils.js"></script>
    <script src="assets/js/core/custom-select.js"></script>
    <script src="assets/js/core/theme.js"></script>
    <script src="assets/js/core/variables.js"></script>
    <script src="assets/js/core/modals.js"></script>
    <script src="assets/js/core/autosave.js"></script>
    <script src="assets/js/core/command.js"></script>
    <script src="assets/js/core/shortcuts.js"></script>
    <script src="assets/js/core/completeness.js"></script>
    <script src="assets/js/core/onboarding.js"></script>
    <script src="assets/js/core/team.js"></script>
    <!-- Tiptap Editor (locally bundled — replaces ESM CDN) -->
    <script src="assets/js/vendor/tiptap.bundle.js"></script>
    <script src="assets/js/editor/tiptap-menus.js"></script>
    <!-- Editor: Editor tabs & components -->
    <script src="assets/js/editor/focus-mode.js"></script>
    <!-- Views: Main page views -->
    <script src="assets/js/views/nav.js"></script>
    <script src="assets/js/views/dashboard.js"></script>
    <script src="assets/js/views/proposals.js"></script>
    <script src="assets/js/views/kanban.js"></script>
    <script src="assets/js/views/analytics.js"></script>
    <script src="assets/js/views/analytics-breakdowns.js"></script>
    <!-- Editor: Main editor + all tabs -->
    <script src="assets/js/editor/toc.js"></script>
    <script src="assets/js/editor/editor.js"></script>
    <script src="assets/js/editor/details.js"></script>
    <script src="assets/js/editor/sections.js"></script>
    <script src="assets/js/editor/ai-assistant.js"></script>
    <script src="assets/js/editor/structured-sections.js"></script>
    <script src="assets/js/editor/section-packs.js"></script>
    <script src="assets/js/editor/pricing.js"></script>
    <script src="assets/js/editor/tc-library.js"></script>
    <script src="assets/js/editor/csv-import.js"></script>
    <script src="assets/js/editor/packages.js"></script>
    <script src="assets/js/editor/addons.js"></script>
    <script src="assets/js/editor/payment-schedule.js"></script>
    <script src="assets/js/editor/payments.js"></script>
    <script src="assets/js/editor/notes.js"></script>
    <!-- Export: PDF, preview, sharing -->
    <script src="assets/js/export/preview.js"></script>
    <script src="assets/js/export/templates.js"></script>
    <script src="assets/js/export/pdf-templates2.js"></script>
    <script src="assets/js/export/export.js"></script>
    <script src="assets/js/export/integrations.js"></script>
    <script src="assets/js/export/derivatives.js"></script>
    <script src="assets/js/export/diff-view.js"></script>
    <script src="assets/js/export/email.js"></script>
    <script src="assets/js/views/clients.js"></script>
    <script src="assets/js/views/client-detail.js"></script>
    <script src="assets/js/export/signature.js"></script>
    <script src="assets/js/views/settings.js"></script>
    <script src="assets/js/views/settings-templates.js"></script>
    <script src="assets/js/views/profile.js"></script>
    <script src="assets/js/export/tpl-data.js"></script>
    <script src="assets/js/export/sharing.js"></script>
    <script src="assets/js/export/create.js"></script>
    <!-- Boot: App initialization (always last) -->
    <script src="assets/js/boot.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').then(reg => {
                if (reg) reg.update();
            }).catch(() => {});
        }
    </script>

</body>

</html>