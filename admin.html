<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProposalKit Admin</title>
    <meta name="robots" content="noindex, nofollow">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">

    <!-- JetBrains Mono for code (same as main app) -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Lucide Icons (vendored locally — same as main app) -->
    <script src="assets/js/vendor/lucide-0.460.0.js"></script>
    <!-- Tailwind CSS v4 Browser CDN (same CDN as main app) -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4.0.0"></script>
    <!-- Supabase JS Client (vendored locally — same as main app) -->
    <script src="assets/js/vendor/supabase-2.49.1.js"></script>
    <!-- Supabase init (reuse main app's config) -->
    <script src="assets/js/core/supabase.js"></script>

    <!-- Shared CSS (exact same design tokens + components as main app) -->
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <!-- Admin-specific CSS -->
    <link rel="stylesheet" href="assets/css/admin.css">
</head>
<body>
    <!-- Noscript fallback -->
    <noscript>
        <div style="display:flex;align-items:center;justify-content:center;min-height:100vh;padding:32px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#fafafa">
            <div style="max-width:420px;text-align:center;background:#fff;padding:48px 32px;border-radius:16px;border:1px solid #e4e4e7">
                <div style="font-size:48px;margin-bottom:16px">&#128274;</div>
                <div style="font-size:20px;font-weight:700;color:#18181b;margin-bottom:8px">JavaScript Required</div>
                <div style="font-size:14px;color:#71717a;line-height:1.6">The admin panel needs JavaScript to run. Please enable it and reload.</div>
                <a href="/admin" style="display:inline-block;margin-top:24px;padding:10px 24px;background:#18181b;color:#fff;border-radius:9999px;text-decoration:none;font-size:14px;font-weight:500">Reload</a>
            </div>
        </div>
    </noscript>

    <!-- Auth Gate -->
    <div id="adminGate" style="display:none"></div>

    <!-- Admin Shell — exact same structure as main app .app -->
    <div class="app" id="adminShell" style="display:none">
        <!-- Mobile sidebar overlay -->
        <div class="side-overlay" id="adminOverlay" onclick="toggleAdminSidebar()"></div>

        <!-- Sidebar — exact shadcn/ui sidebar-07 pattern from main app -->
        <aside class="side" id="adminSidebar" role="navigation" aria-label="Admin navigation">
            <!-- SidebarHeader -->
            <div class="side-header">
                <button class="side-team-btn" onclick="goBackToApp()">
                    <div class="side-team-logo"><i data-lucide="shield-check" style="width:14px;height:14px"></i></div>
                    <span class="side-team-name">Admin Panel</span>
                </button>
            </div>
            <!-- SidebarContent -->
            <div class="side-body">
                <div class="side-group" id="adminNavList"></div>
            </div>
            <!-- SidebarFooter -->
            <div class="side-foot">
                <button class="side-btn" onclick="goBackToApp()"><i data-lucide="arrow-left"></i><span>Back to App</span></button>
                <button class="side-btn" onclick="toggleAdminTheme()"><i data-lucide="sun-moon"></i><span>Theme</span></button>
                <div class="side-user-btn" id="adminFooterUser">
                    <div class="side-user-avatar" id="adminUserAvatar">A</div>
                    <div class="side-user-info">
                        <span class="side-user-name" id="adminUserName">Admin</span>
                        <span class="side-user-email" id="adminUserEmail">admin</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main — exact same structure as main app .main -->
        <div class="main">
            <!-- Topbar — exact shadcn dashboard-01 pattern -->
            <div class="topbar">
                <button class="topbar-trigger" id="adminHamburger" onclick="toggleAdminSidebar()" aria-label="Toggle sidebar">
                    <i data-lucide="panel-left"></i>
                </button>
                <div class="topbar-sep" aria-hidden="true"></div>
                <div class="topbar-breadcrumb">
                    <span class="breadcrumb-item breadcrumb-root" onclick="adminNav('dashboard')">Admin</span>
                    <i data-lucide="chevron-right" class="breadcrumb-sep"></i>
                    <span class="breadcrumb-item breadcrumb-current" id="adminTopTitle">Dashboard</span>
                </div>
                <div style="flex:1"></div>
                <span id="adminUserBadge" style="font-size:14px;color:var(--text3)"></span>
                <button class="btn-sm-outline" onclick="adminRerender()"><i data-lucide="refresh-cw" style="width:14px;height:14px"></i> Refresh</button>
            </div>
            <!-- Content — exact same as .body-scroll -->
            <main class="body-scroll" id="adminContent" role="main"></main>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toasts" id="adminToast" aria-live="assertive" role="alert"></div>

    <!-- Scripts (load order matters) -->
    <script src="assets/js/admin/admin-store.js"></script>
    <script src="assets/js/admin/admin-audit.js"></script>
    <script src="assets/js/admin/admin-nav.js"></script>
    <script src="assets/js/admin/admin-dashboard.js"></script>
    <script src="assets/js/admin/admin-tests.js"></script>
    <script src="assets/js/admin/admin-proposals.js"></script>
    <script src="assets/js/admin/admin-clients.js"></script>
    <script src="assets/js/admin/admin-templates.js"></script>
    <script src="assets/js/admin/admin-config.js"></script>
    <script src="assets/js/admin/admin-debug.js"></script>
    <script src="assets/js/admin/admin-users.js"></script>
    <script src="assets/js/admin/admin-tickets.js"></script>
    <script src="assets/js/admin/admin-subscriptions.js"></script>
    <script src="assets/js/admin/admin-announcements.js"></script>
    <script src="assets/js/admin/admin-analytics-view.js"></script>
    <script src="assets/js/admin/admin-feedback.js"></script>
    <script src="assets/js/admin/admin-boot.js"></script>
</body>
</html>
